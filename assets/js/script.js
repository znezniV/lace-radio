var allVideos,counter=0,tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var player,firstScriptTag=document.getElementsByTagName("script")[0];function onYouTubeIframeAPIReady(){player=new YT.Player("player",{height:"100%",width:"100%",playerVars:{modestbranding:!0,autoplay:1,rel:0,modestbranding:!0,autohide:1,showinfo:0,controls:0,playsinline:1,fs:0,iv_load_policy:3},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}})}function onPlayerReady(a){a.target.a.classList.add("luminanceToAlpha"),fetch("/data.json").then(function(e){return e.json()}).then(function(e){return shuffleArray(e.features)}).then(function(e){var t=(allVideos=e)[counter];addDesc(t),player.loadVideoById({videoId:t.youtubeId}),a.target.playVideo()}).catch(function(e){console.error(e)})}firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var done=!1;function onPlayerStateChange(e){if(e.data==YT.PlayerState.ENDED){counter<allVideos.length-1?counter++:counter=0;var t=allVideos[counter];player.loadVideoById({videoId:t.youtubeId})}}function shuffleArray(e){for(var t,a,n=e.length;0!==n;)a=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[a],e[a]=t;return e}function addDesc(e){var t=document.getElementById("desc");t.setAttribute("href","http://youtube.com/watch?v="+e.youtubeId);var a=document.createElement("p"),n=document.createTextNode(e.artist),o=document.createElement("h3"),r=document.createTextNode(e.songName);a.appendChild(n),o.appendChild(r),t.appendChild(a),t.appendChild(o)}